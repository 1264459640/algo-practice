# Fisher-Yates 测试场景使用说明

## 概述

测试场景提供了一个可视化的界面来演示和测试 Fisher-Yates 洗牌算法。通过直观的图形界面，您可以观察洗牌过程的效果和统计信息。

## 启动方式

### 方式1：Godot 编辑器运行
1. 在 Godot 4.4 中打开项目
2. 确保主场景设置为 `TestScene.tscn`
3. 点击"播放"按钮或按 F5 运行

### 方式2：导出可执行文件
1. 在 Godot 中选择 "项目" → "导出"
2. 配置导出设置
3. 导出为可执行文件运行

## 界面说明

### 主要组件

#### 1. 标题栏
- 显示 "Fisher-Yates 洗牌算法测试场景"

#### 2. 控制按钮
- **洗牌数字**：对数字数组 (1-20) 执行洗牌
- **洗牌扑克牌**：对扑克牌数组 (前20张) 执行洗牌
- **重置**：恢复到初始状态

#### 3. 数字数组显示区
- 显示 20 个数字 (1-20)
- **蓝色按钮**：数字仍在原始位置
- **红色按钮**：数字已被洗牌移动

#### 4. 扑克牌显示区
- 显示前 20 张扑克牌
- **粉色按钮**：红桃 (♥) 和方块 (♦)
- **灰色按钮**：黑桃 (♠) 和梅花 (♣)

#### 5. 统计信息栏
- 显示最近一次洗牌的统计数据
- 包括交换次数、位置变化数、逆序对数等

## 操作方法

### 鼠标操作
1. **点击"洗牌数字"**：
   - 对数字数组执行 Fisher-Yates 洗牌
   - 观察颜色变化（蓝色→红色表示位置改变）
   - 查看统计信息更新

2. **点击"洗牌扑克牌"**：
   - 对扑克牌数组执行洗牌
   - 观察牌的顺序变化
   - 查看统计信息

3. **点击"重置"**：
   - 恢复所有数据到初始状态
   - 清除统计信息

### 键盘快捷键
- **1 键**：洗牌数字
- **2 键**：洗牌扑克牌
- **R 键**：重置
- **ESC 键**：退出程序

## 观察要点

### 1. 随机性验证
- 多次点击洗牌按钮
- 观察每次结果的不同
- 注意没有明显的模式或规律

### 2. 算法效率
- 观察交换次数统计
- 理论期望：约为 (n-1)/2 次交换
- 对于 20 个元素，期望约 9.5 次交换

### 3. 位置变化
- 观察有多少元素改变了位置
- 理论期望：约为 n*(1-1/e) ≈ 63.2% 的元素
- 对于 20 个元素，期望约 12-13 个元素改变位置

### 4. 逆序对分析
- 逆序对：数组中前面元素大于后面元素的对数
- 理论期望：n*(n-1)/4
- 对于 20 个元素，期望约 95 个逆序对

## 控制台输出

程序会在 Godot 控制台输出详细信息：

```
数字洗牌结果: [3, 1, 15, 7, 12, 8, 2, 19, 6, 4, 20, 11, 14, 9, 5, 16, 13, 10, 17, 18]
统计: 交换9次, 位置变化13个, 逆序对89个
```

## 教学用途

### 1. 算法理解
- 直观观察洗牌效果
- 理解随机性的含义
- 验证算法的无偏性

### 2. 统计学习
- 观察实际结果与理论期望的对比
- 理解概率分布的概念
- 学习统计验证方法

### 3. 编程实践
- 学习 Godot 引擎的使用
- 理解 C# 泛型编程
- 掌握用户界面设计

## 扩展实验

### 1. 参数调整
- 修改数组大小（在代码中调整）
- 观察不同大小数组的统计特性

### 2. 算法对比
- 实现其他洗牌算法
- 对比效率和随机性

### 3. 可视化增强
- 添加洗牌过程动画
- 实现更丰富的统计图表

## 故障排除

### 常见问题

1. **程序无法启动**
   - 确保安装了 Godot 4.4 C# 版本
   - 检查 .NET 8.0 是否正确安装

2. **界面显示异常**
   - 尝试调整窗口大小
   - 重启 Godot 编辑器

3. **按钮无响应**
   - 检查控制台是否有错误信息
   - 确保项目正确编译

### 调试信息

如果遇到问题，请查看：
1. Godot 编辑器的输出面板
2. 调试器面板的错误信息
3. 控制台的详细日志

## 技术细节

### 实现特点
- 使用 Godot 4.4 引擎和 C#
- 实时更新的可视化界面
- 完整的统计信息收集
- 键盘和鼠标双重操作支持

### 性能考虑
- 界面更新采用按需刷新
- 统计计算在主线程执行
- 内存使用优化，避免频繁分配

## 总结

这个测试场景为 Fisher-Yates 洗牌算法提供了一个完整的学习和验证环境。通过可视化的方式，您可以：

- 直观理解算法工作原理
- 验证算法的正确性和随机性
- 学习统计分析方法
- 掌握图形界面编程技巧

希望这个工具能帮助您更好地理解和掌握 Fisher-Yates 洗牌算法！